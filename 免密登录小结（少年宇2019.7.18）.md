# 免密登录小结（少年宇2019.7.18）

## 一、为什么要设置免密登录？

1. 免密登录可以让用户不输入密码就直接连接到主机。

2. 免密登录适用于大批集群操作。

3. 通过公私钥进登录认证的使用场景还有很多，但原理都是一致的。

   

## 二、如何设置免密登录？

0. 为了更加直观地说明，现假设由A主机免密登录到B主机。
1. 在主机A上使用命令 `ssh-keygen`生成公私秘钥对。

2. 将主机A上的==公钥==  `id_rsa.pub`拷贝（打印公钥的命令是cat id_rsa.pub)到B主机上的

   ~/.ssh/authorized_keys文件中。（用vim打开）（没有这个文件则新建）

   ==Ps：实际在拷贝公钥的过程中，可以用如下命令直接将公钥拷到B主机上的那个文件中。==

   `ssh-copy-id -i ~/.ssh/id_rsa.pub user@dest_ip`

   Ps:免密登录是在两个用户之间建立的，即使这两个用户在同一主机上也是可以的。

3. 测试免密登录的效果。